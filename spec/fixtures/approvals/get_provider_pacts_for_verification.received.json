{
  "request": {
    "path": "/pacts/provider/Provider/for-verification",
    "headers": {
      "Content-Type": "application/json",
      "Accept": "application/hal+json"
    },
    "body": {
      "consumerVersionSelectors": [
        {
          "tag": "prod",
          "latest": true
        }
      ],
      "includePendingStatus": false,
      "providerVersionTags": [
        "main"
      ]
    }
  },
  "response": {
    "status": 500,
    "headers": {
      "Content-Type": "application/hal+json;charset=utf-8"
    },
    "body": {
      "error": {
        "message": "SQLite3::SQLException: no such column: tag",
        "reference": "umJKHFZHRw",
        "backtrace": [
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sqlite3-1.6.0-x86_64-linux/lib/sqlite3/database.rb:152:in `initialize'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sqlite3-1.6.0-x86_64-linux/lib/sqlite3/database.rb:152:in `new'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sqlite3-1.6.0-x86_64-linux/lib/sqlite3/database.rb:152:in `prepare'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sqlite3-1.6.0-x86_64-linux/lib/sqlite3/database.rb:341:in `query'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/adapters/sqlite.rb:216:in `block (2 levels) in _execute'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/database/logging.rb:38:in `log_connection_yield'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/adapters/sqlite.rb:216:in `block in _execute'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/connection_pool/threaded.rb:88:in `hold'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/database/connecting.rb:293:in `synchronize'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/adapters/sqlite.rb:209:in `_execute'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/adapters/sqlite.rb:156:in `execute'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/dataset/actions.rb:1187:in `execute'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/adapters/sqlite.rb:364:in `fetch_rows'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/dataset/actions.rb:1026:in `with_sql_each'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/dataset/actions.rb:1036:in `with_sql_first'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/dataset/actions.rb:778:in `single_record!'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/sequel-5.65.0/lib/sequel/dataset/actions.rb:766:in `single_record'",
          "/home/ronald/Development/Projects/Pact/pact_broker/lib/pact_broker/deployments/environment_service.rb:50:in `find_by_name'",
          "/home/ronald/Development/Projects/Pact/pact_broker/lib/pact_broker/api/contracts/dry_validation_macros.rb:31:in `block in <module:DryValidationPredicates>'",
          "/home/ronald/Development/Projects/Pact/pact_broker/lib/pact_broker/api/contracts/pacts_for_verification_json_query_schema.rb:61:in `block (2 levels) in <class:PactsForVerificationJSONQuerySchema>'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/evaluator.rb:77:in `instance_exec'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/evaluator.rb:77:in `initialize'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/evaluator.rb:124:in `new'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/evaluator.rb:124:in `with'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/rule.rb:91:in `block (2 levels) in each'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/rule.rb:86:in `each'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/rule.rb:86:in `each_with_index'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/rule.rb:86:in `block in each'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/evaluator.rb:77:in `instance_exec'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/evaluator.rb:77:in `initialize'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/rule.rb:38:in `new'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/rule.rb:38:in `call'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/contract.rb:98:in `block (2 levels) in call'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/contract.rb:95:in `each'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/contract.rb:95:in `block in call'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/result.rb:25:in `new'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/dry-validation-1.5.6/lib/dry/validation/contract.rb:94:in `call'",
          "/home/ronald/Development/Projects/Pact/pact_broker/lib/pact_broker/api/contracts/pacts_for_verification_json_query_schema.rb:67:in `call'",
          "/home/ronald/Development/Projects/Pact/pact_broker/lib/pact_broker/api/resources/provider_pacts_for_verification.rb:100:in `schema_validation_errors?'",
          "/home/ronald/Development/Projects/Pact/pact_broker/lib/pact_broker/api/resources/provider_pacts_for_verification.rb:23:in `malformed_request?'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/decision/flow.rb:99:in `b9b'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/decision/fsm.rb:31:in `block (2 levels) in run'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/decision/fsm.rb:51:in `handle_exceptions'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/decision/fsm.rb:31:in `block in run'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/decision/fsm.rb:29:in `loop'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/decision/fsm.rb:29:in `run'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/dispatcher.rb:46:in `block in dispatch'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/as-notifications-1.0.2/lib/as/notifications.rb:161:in `instrument'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/events.rb:75:in `instrument'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/dispatcher.rb:45:in `dispatch'",
          "/usr/share/rvm/gems/ruby-3.0.5/bundler/gems/webmachine-ruby-2470ae64ea54/lib/webmachine/adapters/rack.rb:68:in `call'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rack-test-2.0.2/lib/rack/test.rb:358:in `process_request'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rack-test-2.0.2/lib/rack/test.rb:165:in `custom_request'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rack-test-2.0.2/lib/rack/test.rb:114:in `post'",
          "/usr/share/rvm/rubies/ruby-3.0.5/lib/ruby/3.0.0/forwardable.rb:238:in `post'",
          "/home/ronald/Development/Projects/Pact/pact_broker/spec/features/get_provider_pacts_for_verification_spec.rb:71:in `block (4 levels) in <top (required)>'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:343:in `block (2 levels) in let'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:179:in `block (3 levels) in fetch_or_store'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:179:in `fetch'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:179:in `block (2 levels) in fetch_or_store'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-support-3.12.0/lib/rspec/support/reentrant_mutex.rb:23:in `synchronize'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:178:in `block in fetch_or_store'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:177:in `fetch'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:177:in `fetch_or_store'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:343:in `block in let'",
          "/home/ronald/Development/Projects/Pact/pact_broker/spec/features/get_provider_pacts_for_verification_spec.rb:67:in `block (4 levels) in <top (required)>'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:343:in `block (2 levels) in let'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:179:in `block (3 levels) in fetch_or_store'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:179:in `fetch'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:179:in `block (2 levels) in fetch_or_store'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-support-3.12.0/lib/rspec/support/reentrant_mutex.rb:23:in `synchronize'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:178:in `block in fetch_or_store'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:177:in `fetch'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:177:in `fetch_or_store'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/memoized_helpers.rb:343:in `block in let'",
          "/home/ronald/Development/Projects/Pact/pact_broker/spec/features/get_provider_pacts_for_verification_spec.rb:75:in `block (4 levels) in <top (required)>'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:263:in `instance_exec'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:263:in `block in run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:511:in `block in with_around_and_singleton_context_hooks'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:468:in `block in with_around_example_hooks'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/hooks.rb:486:in `block in run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/hooks.rb:626:in `block in run_around_example_hooks_for'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:352:in `call'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/webmock-3.18.1/lib/webmock/rspec.rb:37:in `block (2 levels) in <top (required)>'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:457:in `instance_exec'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:457:in `instance_exec'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/hooks.rb:390:in `execute_with'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:352:in `call'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-expectations-3.12.2/lib/rspec/expectations/failure_aggregator.rb:25:in `block in aggregate'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-support-3.12.0/lib/rspec/support.rb:118:in `with_failure_notifier'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-expectations-3.12.2/lib/rspec/expectations/failure_aggregator.rb:23:in `aggregate'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-expectations-3.12.2/lib/rspec/matchers.rb:306:in `aggregate_failures'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/configuration.rb:2253:in `block in define_built_in_hooks'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:457:in `instance_exec'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:457:in `instance_exec'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/hooks.rb:390:in `execute_with'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:352:in `call'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/hooks.rb:629:in `run_around_example_hooks_for'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/hooks.rb:486:in `run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:468:in `with_around_example_hooks'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:511:in `with_around_and_singleton_context_hooks'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example.rb:259:in `run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:646:in `block in run_examples'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:642:in `map'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:642:in `run_examples'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:607:in `run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:608:in `block in run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:608:in `map'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:608:in `run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:608:in `block in run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:608:in `map'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/example_group.rb:608:in `run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/runner.rb:121:in `block (3 levels) in run_specs'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/runner.rb:121:in `map'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/runner.rb:121:in `block (2 levels) in run_specs'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/configuration.rb:2070:in `with_suite_hooks'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/runner.rb:116:in `block in run_specs'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/reporter.rb:74:in `report'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/runner.rb:115:in `run_specs'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/runner.rb:89:in `run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/runner.rb:71:in `run'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/lib/rspec/core/runner.rb:45:in `invoke'",
          "/usr/share/rvm/gems/ruby-3.0.5/gems/rspec-core-3.12.1/exe/rspec:4:in `<main>'"
        ]
      }
    }
  }
}
